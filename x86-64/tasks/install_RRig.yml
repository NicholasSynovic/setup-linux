# Install r-rig

- name: "Download latest r-rig release"
  become: false
  get_url:
    dest: "/home/{{ currentUser.stdout }}/.temp/r-rig.tar.gz"
    url: "https://github.com/r-lib/rig/releases/download/latest/rig-linux-latest.tar.gz"

- name: "Decompress r-rig"
  become: false
  unarchive:
    copy: false
    dest: "/home/{{ currentUser.stdout }}/.local"
    src: "/home/{{ currentUser.stdout }}/.temp/r-rig.tar.gz"
    
- name: "Install latest R release"
  become: true
  shell:
    cmd: "{{ rigExecutable.stat.path }} install release"

- name: "Set default to be the latest R release"
  become: true
  shell:
    cmd: "{{ rigExecutable.stat.path }} default release"
